# Failed to Load Content Issue Analysis

## Problem Description
In the Article Search page (`/articles/search`) or the Manual Filter Search Drawer, clicking "Load content" results in the error message:
**"Failed to load content."** (or "load content fail")

## Technical Analysis

The error message "Failed to load content" is generated by the frontend JavaScript when the API request to fetch content fails.

**Frontend Location:**
- `src/console/web_templates/search.html` (Line 426)
- `src/console/web_static/js/manual_filter/search_drawer.js` (Line 215)

**Backend Endpoint:**
- Method: `GET`
- URL: `/api/articles/{article_id}/content`
- Handler: `src/console/articles_routes.py` -> `get_article_content_api`

### Potential Causes

1.  **API Error (Non-200 Status Code)**
    The JavaScript code checks `if (!response.ok)`. If the server returns any status code other than 200-299 (e.g., 404 Not Found, 500 Internal Server Error, 401 Unauthorized), it throws an error which is caught and displays "Failed to load content."

    - **401 Unauthorized**: If the authentication session has expired or the `web_routes` page loaded but the fetch request is not sending credentials correctly (though unlikely for same-origin requests unless headers are required).
    - **404 Not Found**: If URL construction is malformed (e.g., empty `article_id`).
    - **500 Internal Server Error**: If the backend service `articles_service.get_article_content` raises an unhandled exception (e.g., database connection failure).

2.  **Database Connection Issue**
    If the Postgres adapter (`src/adapters/db_postgres_core.py`) fails to connect or execute the query, it might raise an exception. The current service implementation wraps adapter retrieval in `try/except` returning `None` (graceful degradation), but the query execution itself is not wrapped in `articles_service.py`. If `adapter.fetch_news_summary_content` raises an exception, the API will return 500.

3.  **Network/Connectivity**
    If the browser cannot reach the server `/api/articles/...` (e.g., proxy issues, "load content" blocked by ad blocker if path looks like ad?), `fetch` will throw a network error.

## Troubleshooting Steps

To accurately identify the cause, please perform the following checks:

1.  **Check Browser Network Tab**:
    - Open Developer Tools (F12) -> **Network** tab.
    - Click "Load content".
    - Find the request to `content`.
    - **Check the Status Code**.
        - **500**: Check the server console/logs for the Python traceback.
        - **404**: Check the Request URL. Is the `article_id` part correct? (e.g. `/api/articles//content` vs `/api/articles/123/content`).
        - **401/403**: Authentication issue. Try refreshing the page or logging in again.

2.  **Check Server Logs**:
    - Look at the terminal running the `uvicorn`/FastAPI server.
    - See if there is an error log corresponding to the request.

## Action Plan
- If **Status 500**: The issue is in the backend logic or database. Share `db_postgres_news_summaries.py` or server logs.
- If **Status 404**: The `article_id` is missing in the frontend data.
- If **Status 401**: Check `security.py` or browser cookies.
